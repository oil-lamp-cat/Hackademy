# gdb, pwndbg ì„¤ì¹˜, ì‹¤í–‰, gdb cli

<aside>
ğŸ’¡ author : ì „ì¬í˜¸(agamtt) 2024-03-15
contributor : ì†ê¸°ë¯¼(KiminSon) 2024-04-07

</aside>

ë””ë²„ê¹…ì„ í•˜ê¸° ìœ„í•´, ë””ë²„ê±°ë¥¼ ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.

ë¦¬ëˆ…ìŠ¤ìš© ë°”ì´ë„ˆë¦¬ ë””ë²„ê±°ë¡œëŠ” gdb ê°€ ê°€ì¥ ìœ ëª…í•©ë‹ˆë‹¤.

ë‹¤ë¥¸ ë””ë²„ê±°ì˜ ì‚¬ìš©ë²•ë„ gdb ì™€ ë§¤ìš° ìœ ì‚¬í•˜ë¯€ë¡œ, gdb ë¥¼ ë°°ìš°ë©´ ë‹¤ë¥¸ ë””ë²„ê±°ë„ ì‰½ê²Œ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# gdb ì„¤ì¹˜

gdb ëŠ” gnu debugger ì˜ ì•½ìë¡œ, ë¦¬ëˆ…ìŠ¤ìš© ë””ë²„ê±° ì…ë‹ˆë‹¤.

```bash
apt update && apt install -y gdb
```

# pwndbg ì„¤ì¹˜

pwndbg ëŠ” gdb ìš© í”ŒëŸ¬ê·¸ì¸ì…ë‹ˆë‹¤.

[GitHub - pwndbg/pwndbg: Exploit Development and Reverse Engineering with GDB Made Easy](https://github.com/pwndbg/pwndbg)

ì£¼ì˜í•  ì ì€, root ê¶Œí•œìœ¼ë¡œ setup.sh ë¥¼ ì‹¤í–‰í•´ì„œëŠ” ì•ˆë©ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ root ë§Œ pwndbg ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê³ , ì¼ë°˜ ìœ ì €ê°€ pwndbg ë¥¼ ì“¸ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```bash
apt install -y git

su user # user ëŠ” ì‹¤ì œ ë¦¬ëˆ…ìŠ¤ ìœ ì €ëª…ìœ¼ë¡œ ëŒ€ì²´, root ë¡œ ì•„ë˜ë¥¼ ì‹¤í–‰í•˜ë©´ ì•ˆë¨.

# git clone í•  ë””ë ‰í† ë¦¬ëŠ” ììœ ë¡­ê²Œ ì„ íƒ, /home/user ì•ˆì´ ì ë‹¹.
git clone https://github.com/pwndbg/pwndbg
cd pwndbg
./setup.sh
```

- git clone ì„ í•˜ê³  ë‚˜ë©´ pwndbg ë¼ëŠ” í´ë”ì— pwndbg ì„¤ì¹˜íŒŒì¼ì„ ë‚´ë ¤ ë°›ìŠµë‹ˆë‹¤.
- pwndbg í´ë”ë¡œ ë“¤ì–´ê°€ì„œ, setup.sh ë¥¼ ì‹¤í–‰í•˜ë©´ ì„¤ì¹˜ë©ë‹ˆë‹¤.

# pwndbg ìœ ë‹ˆì½”ë“œ ì„¤ì •

pwndbg ë¡œ í•œê¸€ê³¼ ê°™ì€ ë‹¤êµ­ì–´ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì•„ë˜ ì„¤ì •ì„ í•´ì•¼í•©ë‹ˆë‹¤.

ë‘ê°œì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë©´ ë©ë‹ˆë‹¤. (root ê°€ ì•„ë‹ˆë¼ user ì˜ ê¶Œí•œìœ¼ë¡œ í•´ì•¼í•¨)

```bash
echo 'export LANG=C.UTF-8' >> ~/.bashrc
source ~/.bashrc
```

# gdb ì™€ pwndbg ê°€ ì˜ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸

ì´ì œ grappe_story ì‹¤í–‰íŒŒì¼ì´ ìˆëŠ” ë””ë ‰í† ë¦¬ì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

gdb ì•ˆì—ì„œ ê²Œì„ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

```bash
gdb ./grapple_story_2
```

ì´ì œ, gdb ì•ˆì—ì„œ ëª…ë ¹ì–´ë¥¼ ë‚´ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œ ê²Œì„ì´ ì œëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤. r ì€ ì‹¤í–‰(run) ì˜ ì•½ìì…ë‹ˆë‹¤.

```bash
pwndbg > r 
# ë˜ëŠ”
pwndbg > run
```

![Untitled](Untitled%20313.png)

ê²Œì„ì„ ì¢…ë£Œí•˜ê³  ë‚˜ê°€ë ¤ë©´ quit ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.

```bash
pwndbg > quit
```

# gdb shell

ì•„ë˜ëŠ” ë¦¬ëˆ…ìŠ¤ì˜ ì‰˜ ì…ë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ ì‰˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

![Untitled](Untitled%20314.png)

gdb ë¥¼ ì‹¤í–‰í•˜ë©´ gdb ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ì‰˜ì´ ìƒˆë¡œ ì—´ë¦½ë‹ˆë‹¤.

ì´ê²ƒì€ ë¦¬ëˆ…ìŠ¤ ì‰˜ì´ ì•„ë‹ˆê³ , gdb ì— ëª…ë ¹ì„ ë‚´ë¦¬ëŠ” gdb shell ì…ë‹ˆë‹¤.

ì´ê²ƒì„ ì•ìœ¼ë¡œ **gdb shell** ì´ë¼ê³  ë¶€ë¥´ê² ìŠµë‹ˆë‹¤.

![Untitled](Untitled%20315.png)

ì•„ë˜ì™€ ê°™ì´ ì“°ê³  ëª…ë ¹ì–´ë¥¼ ì“°ë©´, gdb ì•ˆì—ì„œ gdb shell ì— ì…ë ¥í•˜ë¼ëŠ” ì˜ë¯¸ë¡œ ì´í•´í•˜ë©´ ë©ë‹ˆë‹¤.

```bash
pwndbg>
# ë˜ëŠ”
gdb>
```

ì˜ˆì‹œ) gdb shell ì—ì„œ quit ì…ë ¥í•˜ì„¸ìš”

```bash
gdb> quit
```

ê³„ì†